{"ast":null,"code":"import _defineProperty from\"C:/Users/green/OneDrive/Desktop/online-selling-and-shopping/src/main/webapp/WEB-INF/view/shopparound-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/green/OneDrive/Desktop/online-selling-and-shopping/src/main/webapp/WEB-INF/view/shopparound-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/green/OneDrive/Desktop/online-selling-and-shopping/src/main/webapp/WEB-INF/view/shopparound-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef,useState}from\"react\";import{useNavigate}from'react-router-dom';import{useCookies}from\"react-cookie\";import LoginError from\"./LoginError\";import\"./styles/Login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function submitLogin(inputs){var url='http://localhost:8080/perform_login';var options={method:\"POST\",headers:{'Content-Type':'application/json','Authorization':'Basic '+window.btoa(\"\".concat(inputs.username,\":\").concat(inputs.password))},body:JSON.stringify(inputs)};return fetch(url,options);}function Login(){var _useCookies=useCookies(),_useCookies2=_slicedToArray(_useCookies,2),setCookie=_useCookies2[1];var navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),inputs=_useState2[0],setInputs=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),errorInputCount=_useState4[0],setErrorInputCount=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loginError=_useState6[0],setLoginError=_useState6[1];var inputErrors=useRef({\"usernameInputError\":false,\"passwordInputError\":false,\"errorInputCount\":0});useEffect(function(){},[errorInputCount]);var HandleInputChangeEvent=function HandleInputChangeEvent(event){var target=event.target;var value=target.value;var name=target.name;setInputs(function(values){return _objectSpread(_objectSpread({},values),{},_defineProperty({},name,value));});};var HandleSubmitFromEvent=function HandleSubmitFromEvent(event){if(Object.entries(inputs).length<=0||inputs.username===''&&inputs.password===''){inputErrors.current.usernameError=true;inputErrors.current.passwordError=true;}else{if(typeof inputs.username==='undefined'||inputs.username===''){inputErrors.current.usernameError=true;inputErrors.current.passwordError=false;}else if(typeof inputs.password==='undefined'||inputs.password===''){inputErrors.current.usernameError=false;inputErrors.current.passwordError=true;}else{submitLogin(inputs).then(function(response){if(response.status===202){response.json().then(function(result){console.log(result);setCookie(\"user\",result);});navigate(-1);}else{if(!loginError){setLoginError(true);inputErrors.current.usernameError=false;inputErrors.current.passwordError=false;}}}).catch(function(err){return console.log(err);});}}setErrorInputCount(function(c){return c+1;});event.preventDefault();};var usernameInput=inputs.username||\"\";var passwordInput=inputs.password||\"\";return/*#__PURE__*/_jsxs(\"div\",{className:\"loginForm-container\",children:[loginError&&/*#__PURE__*/_jsx(LoginError,{}),/*#__PURE__*/_jsx(\"form\",{className:\"loginForm\",onSubmit:HandleSubmitFromEvent,children:/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"password-field-container\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"username\",children:[\"Username\",/*#__PURE__*/_jsx(\"input\",{name:\"username\",id:\"username\",type:\"text\",defaultValue:usernameInput,onChange:HandleInputChangeEvent}),inputErrors.current.usernameError?/*#__PURE__*/_jsx(\"span\",{className:\"usernameError\",children:\"Please enter username.\"}):/*#__PURE__*/_jsx(_Fragment,{})]})})})}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"password-field-container\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"password\",children:[\"Password\",/*#__PURE__*/_jsx(\"input\",{name:\"password\",id:\"password\",type:\"text\"// autoComplete=\"off\"\n,defaultValue:passwordInput,onChange:HandleInputChangeEvent}),inputErrors.current.passwordError?/*#__PURE__*/_jsx(\"span\",{className:\"passwordError\",children:\"Please enter password.\"}):/*#__PURE__*/_jsx(_Fragment,{})]})})})}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"button-field-container\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"submit-button\",type:\"submit\",value:\"Login\",readOnly:true}),/*#__PURE__*/_jsx(\"input\",{id:\"cancel-button\",type:\"cancel\",value:\"Cancle\",readOnly:true,onClick:function onClick(){return navigate('/');}})]})})})]})})})]});}export default Login;","map":{"version":3,"names":["useEffect","useRef","useState","useNavigate","useCookies","LoginError","submitLogin","inputs","url","options","method","headers","window","btoa","username","password","body","JSON","stringify","fetch","Login","setCookie","navigate","setInputs","errorInputCount","setErrorInputCount","loginError","setLoginError","inputErrors","HandleInputChangeEvent","event","target","value","name","values","HandleSubmitFromEvent","Object","entries","length","current","usernameError","passwordError","then","response","status","json","result","console","log","catch","err","c","preventDefault","usernameInput","passwordInput"],"sources":["C:/Users/green/OneDrive/Desktop/online-selling-and-shopping/src/main/webapp/WEB-INF/view/shopparound-app/src/Login.js"],"sourcesContent":["import{ useEffect, useRef, useState} from \"react\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useCookies } from \"react-cookie\";\r\nimport LoginError from \"./LoginError\";\r\nimport \"./styles/Login.css\"\r\n\r\n function submitLogin(inputs){\r\n\r\n    const url = 'http://localhost:8080/perform_login';\r\n    const options = {\r\n        method: \"POST\",\r\n        headers: {'Content-Type': 'application/json','Authorization': 'Basic '+ window.btoa(`${inputs.username}:${inputs.password}`)},\r\n        body: JSON.stringify(inputs)\r\n    };\r\n    \r\n    return fetch(\r\n        url,\r\n        options,\r\n    );\r\n}\r\n\r\n\r\nfunction Login() {\r\n    const [, setCookie] = useCookies();\r\n    const navigate = useNavigate();\r\n    const [inputs, setInputs] = useState({});\r\n    const [errorInputCount, setErrorInputCount] = useState(0);\r\n    const [loginError, setLoginError] = useState(false);\r\n    const inputErrors = useRef({\r\n                                \"usernameInputError\": false,\r\n                                \"passwordInputError\": false,\r\n                                \"errorInputCount\" : 0\r\n                            });\r\n\r\n    useEffect(()=>{}, [errorInputCount]);\r\n\r\n    const HandleInputChangeEvent = (event) => {\r\n\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n        \r\n        setInputs(values => ({\r\n            ...values, [name]: value\r\n        }));\r\n    }\r\n\r\n    const HandleSubmitFromEvent = (event) => {\r\n       \r\n        if(Object.entries(inputs).length <= 0 || \r\n            (inputs.username === '' && inputs.password === '')){\r\n\r\n            inputErrors.current.usernameError = true; \r\n            inputErrors.current.passwordError = true;\r\n                       \r\n        }else{\r\n\r\n            if(typeof(inputs.username) === 'undefined' || inputs.username === ''){\r\n                inputErrors.current.usernameError = true; \r\n                inputErrors.current.passwordError = false;  \r\n            }else if(typeof(inputs.password) === 'undefined' || inputs.password === ''){\r\n                inputErrors.current.usernameError = false; \r\n                inputErrors.current.passwordError = true;  \r\n            }else{\r\n                \r\n                submitLogin(inputs)\r\n                .then((response)=>{\r\n                    if(response.status === 202){\r\n                   \r\n                        response.json().then((result)=>{\r\n                            console.log(result);\r\n                            setCookie(\r\n                               \"user\",\r\n                               result\r\n                            );\r\n                            \r\n                        });\r\n                        \r\n                        navigate(-1);\r\n                    }else{\r\n                        if(!loginError){\r\n                            setLoginError(true);\r\n                            inputErrors.current.usernameError = false; \r\n                            inputErrors.current.passwordError = false;\r\n                        }\r\n                    }\r\n                    \r\n                })\r\n                .catch((err) => console.log(err));\r\n                \r\n            }\r\n           \r\n        }\r\n        \r\n        setErrorInputCount((c)=> c + 1);\r\n\r\n        event.preventDefault();\r\n\r\n    }\r\n\r\n    var usernameInput = inputs.username || \"\";\r\n    var passwordInput = inputs.password || \"\";\r\n\r\n    return (\r\n        <div className=\"loginForm-container\">\r\n            {(loginError) && <LoginError />}\r\n            <form className=\"loginForm\"  onSubmit={HandleSubmitFromEvent}>\r\n                <table>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>\r\n                                <div className=\"password-field-container\">\r\n                                    <label htmlFor=\"username\">\r\n                                        Username\r\n                                        <input \r\n                                            name=\"username\" \r\n                                            id=\"username\"\r\n                                            type=\"text\"\r\n                                            defaultValue={usernameInput} \r\n                                            onChange={HandleInputChangeEvent} \r\n                                        />\r\n                                    \r\n                                    { (inputErrors.current.usernameError) ? <span className=\"usernameError\">Please enter username.</span> : <></>}\r\n                                    </label>\r\n                                    \r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                <div className=\"password-field-container\">\r\n                                    <label htmlFor=\"password\">\r\n                                        Password\r\n                                        <input \r\n                                            name=\"password\"\r\n                                            id='password'\r\n                                            type=\"text\" \r\n                                            // autoComplete=\"off\"\r\n                                            defaultValue={passwordInput} \r\n                                            onChange={HandleInputChangeEvent} \r\n                                        />    \r\n                                    { inputErrors.current.passwordError ? <span className=\"passwordError\">Please enter password.</span> : <></>}\r\n                                    </label>\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                <div className=\"button-field-container\">\r\n                                    <input id=\"submit-button\" type=\"submit\" value=\"Login\" readOnly/>\r\n                                    <input id=\"cancel-button\" type=\"cancel\" value=\"Cancle\" readOnly onClick={()=> navigate('/')} />\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </form>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}