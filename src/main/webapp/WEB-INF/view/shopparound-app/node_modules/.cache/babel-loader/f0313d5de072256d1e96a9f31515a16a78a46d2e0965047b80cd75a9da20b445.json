{"ast":null,"code":"import _slicedToArray from\"C:/Users/green/OneDrive/Desktop/online-selling-and-shopping/src/main/webapp/WEB-INF/view/shopparound-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useState}from'react';import{useCookies}from'react-cookie';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import'./styles/App.css';import Layout from'./Layout';import HomePage from'./HomePage';import Login from'./Login';import TestPage from'./TestPage';import UserProfile from'./UserProfile';import Users from'./Users';import Products from'./Products';import Discounts from'./Discounts';import SetCookie from'./cookies/setCookie';//https://www.copycat.dev/blog/react-router-redirect/#:~:text=Router%20Dom%20here.-,What%20is%20React%20Router%20Redirect%3F,route%20to%20a%20new%20route.&text=The%20component%20has,%2F%3E%20in%20React%20Router%20v6.\n/* none export var */ /* exports var */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var UserContext=/*#__PURE__*/createContext();function App(){var _useCookies=useCookies(),_useCookies2=_slicedToArray(_useCookies,2),cookies=_useCookies2[0],setCookies=_useCookies2[1];var needLogin=null;if(Object.entries(cookies).length===0){SetCookie({\"name\":\"user\",\"value\":{},\"option\":{path:'/'}});}if(Object.entries(cookies).length!==0&&Object.entries(cookies.user).length===0){needLogin=true;}else{needLogin=false;}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(Routes,{children:/*#__PURE__*/_jsxs(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Layout,{}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/userProfile\",element:/*#__PURE__*/_jsx(UserProfile,{})}),/*#__PURE__*/_jsx(Route,{path:\"/users\",element:needLogin?/*#__PURE__*/_jsx(Navigate,{to:\"/login\"}):/*#__PURE__*/_jsx(Users,{})}),/*#__PURE__*/_jsx(Route,{path:\"/products\",element:/*#__PURE__*/_jsx(Products,{})}),/*#__PURE__*/_jsx(Route,{path:\"/discounts\",element:/*#__PURE__*/_jsx(Discounts,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"testPage\",element:/*#__PURE__*/_jsx(TestPage,{})})]})})});}export default App;","map":{"version":3,"names":["createContext","useState","useCookies","BrowserRouter","Router","Routes","Route","Navigate","Layout","HomePage","Login","TestPage","UserProfile","Users","Products","Discounts","SetCookie","UserContext","App","cookies","setCookies","needLogin","Object","entries","length","path","user"],"sources":["C:/Users/green/OneDrive/Desktop/online-selling-and-shopping/src/main/webapp/WEB-INF/view/shopparound-app/src/App.js"],"sourcesContent":["import { createContext, useState } from 'react';\nimport { useCookies } from 'react-cookie';\nimport {BrowserRouter as Router,Routes, Route, Navigate} from 'react-router-dom';\nimport './styles/App.css';\nimport Layout from './Layout';\nimport HomePage from './HomePage';\nimport Login from './Login'\nimport TestPage from './TestPage';\nimport UserProfile from './UserProfile';\nimport Users from './Users';\nimport Products from './Products';\nimport Discounts from './Discounts';\nimport SetCookie from './cookies/setCookie';\n\n\n//https://www.copycat.dev/blog/react-router-redirect/#:~:text=Router%20Dom%20here.-,What%20is%20React%20Router%20Redirect%3F,route%20to%20a%20new%20route.&text=The%20component%20has,%2F%3E%20in%20React%20Router%20v6.\n\n/* none export var */\n\n\n/* exports var */\nexport const UserContext = createContext();\n\n\n\nfunction App() {\n\n  const [cookies, setCookies] = useCookies();\n  \n  let needLogin = null;\n\n\n  if(Object.entries(cookies).length === 0){\n\n    SetCookie({\n      \"name\": \"user\",\n      \"value\": {},\n      \"option\": {path: '/'}\n    });\n\n  }\n    \n  if(Object.entries(cookies).length !== 0 \n    && Object.entries(cookies.user).length === 0){\n    needLogin = true;\n  }else{\n    needLogin = false;\n  }\n    \n  \n  return (\n    <Router>\n      <Routes >\n        <Route path=\"/\" element={<Layout />}>\n          <Route index element={<HomePage />} />\n          <Route path=\"/userProfile\" element={<UserProfile />} />\n          <Route path=\"/users\" element={ needLogin ? <Navigate to=\"/login\" /> : <Users /> }/>\n          <Route path=\"/products\" element={<Products />} />\n          <Route path=\"/discounts\" element={<Discounts />} />\n          <Route path=\"/login\"  element={<Login />} />\n          <Route path=\"testPage\" element={<TestPage />} />\n        </Route>\n      </Routes>\n    </Router>  \n  );\n}\n\n\nexport default App;"],"mappings":"8LAAA,OAASA,aAAa,CAAEC,QAAQ,KAAQ,OAAO,CAC/C,OAASC,UAAU,KAAQ,cAAc,CACzC,OAAQC,aAAa,GAAIC,OAAM,CAACC,MAAM,CAAEC,KAAK,CAAEC,QAAQ,KAAO,kBAAkB,CAChF,MAAO,kBAAkB,CACzB,MAAOC,OAAM,KAAM,UAAU,CAC7B,MAAOC,SAAQ,KAAM,YAAY,CACjC,MAAOC,MAAK,KAAM,SAAS,CAC3B,MAAOC,SAAQ,KAAM,YAAY,CACjC,MAAOC,YAAW,KAAM,eAAe,CACvC,MAAOC,MAAK,KAAM,SAAS,CAC3B,MAAOC,SAAQ,KAAM,YAAY,CACjC,MAAOC,UAAS,KAAM,aAAa,CACnC,MAAOC,UAAS,KAAM,qBAAqB,CAG3C;AAEA,sBAGA,yGACA,MAAO,IAAMC,YAAW,cAAGjB,aAAa,EAAE,CAI1C,QAASkB,IAAG,EAAG,CAEb,gBAA8BhB,UAAU,EAAE,4CAAnCiB,OAAO,iBAAEC,UAAU,iBAE1B,GAAIC,UAAS,CAAG,IAAI,CAGpB,GAAGC,MAAM,CAACC,OAAO,CAACJ,OAAO,CAAC,CAACK,MAAM,GAAK,CAAC,CAAC,CAEtCR,SAAS,CAAC,CACR,MAAM,CAAE,MAAM,CACd,OAAO,CAAE,CAAC,CAAC,CACX,QAAQ,CAAE,CAACS,IAAI,CAAE,GAAG,CACtB,CAAC,CAAC,CAEJ,CAEA,GAAGH,MAAM,CAACC,OAAO,CAACJ,OAAO,CAAC,CAACK,MAAM,GAAK,CAAC,EAClCF,MAAM,CAACC,OAAO,CAACJ,OAAO,CAACO,IAAI,CAAC,CAACF,MAAM,GAAK,CAAC,CAAC,CAC7CH,SAAS,CAAG,IAAI,CAClB,CAAC,IAAI,CACHA,SAAS,CAAG,KAAK,CACnB,CAGA,mBACE,KAAC,MAAM,wBACL,KAAC,MAAM,wBACL,MAAC,KAAK,EAAC,IAAI,CAAC,GAAG,CAAC,OAAO,cAAE,KAAC,MAAM,IAAI,wBAClC,KAAC,KAAK,EAAC,KAAK,MAAC,OAAO,cAAE,KAAC,QAAQ,IAAI,EAAG,cACtC,KAAC,KAAK,EAAC,IAAI,CAAC,cAAc,CAAC,OAAO,cAAE,KAAC,WAAW,IAAI,EAAG,cACvD,KAAC,KAAK,EAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAGA,SAAS,cAAG,KAAC,QAAQ,EAAC,EAAE,CAAC,QAAQ,EAAG,cAAG,KAAC,KAAK,IAAK,EAAE,cACnF,KAAC,KAAK,EAAC,IAAI,CAAC,WAAW,CAAC,OAAO,cAAE,KAAC,QAAQ,IAAI,EAAG,cACjD,KAAC,KAAK,EAAC,IAAI,CAAC,YAAY,CAAC,OAAO,cAAE,KAAC,SAAS,IAAI,EAAG,cACnD,KAAC,KAAK,EAAC,IAAI,CAAC,QAAQ,CAAE,OAAO,cAAE,KAAC,KAAK,IAAI,EAAG,cAC5C,KAAC,KAAK,EAAC,IAAI,CAAC,UAAU,CAAC,OAAO,cAAE,KAAC,QAAQ,IAAI,EAAG,GAC1C,EACD,EACF,CAEb,CAGA,cAAeH,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}